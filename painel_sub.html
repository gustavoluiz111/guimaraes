<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Subordinado - Guimar√£es Equipamentos</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#f5f5f5; color:#333; transition:0.4s;}
  body.dark { background:#1a1a1a; color:#f5f5f5; }
  .menu-btn { position:fixed; top:15px; left:15px; width:35px; height:30px; cursor:pointer; z-index:1001;}
  .menu-btn div { width:100%; height:5px; background:#ffcc00; margin:6px 0; transition:0.4s;}
  .menu-btn.open div:nth-child(1){ transform:rotate(45deg) translate(6px,6px);}
  .menu-btn.open div:nth-child(2){ opacity:0;}
  .menu-btn.open div:nth-child(3){ transform:rotate(-45deg) translate(6px,-6px);}
  .side-menu { position:fixed; left:-250px; top:0; width:250px; height:100%; background:#333; color:#ffcc00; padding-top:60px; transition:0.4s; z-index:1000;}
  .side-menu a { display:block; color:#ffcc00; padding:15px 20px; text-decoration:none; font-weight:bold;}
  .side-menu a:hover { background:#ffcc00; color:#333;}
  .main { padding:20px; transition:0.4s;}
  h1 { margin-top:0; }
  .card-container { display:flex; flex-wrap:wrap; gap:20px;}
  .card { width:200px; padding:15px; border-radius:10px; background:#fff; text-align:center; box-shadow:0 3px 6px rgba(0,0,0,0.2); cursor:pointer;}
  .card.dark { background:#333; color:#ffcc00;}
  .status { font-weight:bold; padding:5px; border-radius:5px; color:#fff;}
  .disponivel{background:green;} .uso{background:orange;} .manutencao{background:red;}
  img.betoneira { width:150px; margin-top:10px;}
  #map { height:400px; width:100%; margin-top:20px; border-radius:10px; }
  .legenda { background:white; padding:10px; border-radius:5px; font-size:14px; margin-top:10px;}
  .legenda ul{margin:0; padding:0; list-style:none;}
</style>
</head>
<body>

<div class="menu-btn" onclick="toggleMenu(this)"><div></div><div></div><div></div></div>
<div class="side-menu" id="sideMenu">
  <a href="#" onclick="showSection('monitoramento')">Monitoramento</a>
  <a href="#" onclick="showSection('detalhes')">Detalhes Betoneira</a>
</div>

<div class="main" id="mainContent">

  <!-- MONITORAMENTO -->
  <div id="monitoramento">
    <h1>Monitoramento das Betoneiras</h1>
    <div class="card-container" id="betoneiras"></div>
    <div id="map"></div>
    <div class="legenda">
      <b>Legenda - Tecnologias de Rastreamento:</b>
      <ul>
        <li>üì° GPS tradicional</li>
        <li>üì∂ IoT com chip GSM</li>
        <li>üåê RFID para dep√≥sitos</li>
      </ul>
    </div>
  </div>

  <!-- DETALHES -->
  <div id="detalhes" style="display:none;">
    <h1>Detalhes da Betoneira</h1>
    <div id="detalhesConteudo"></div>
    <div id="detalheMapa" style="height:300px; margin-top:15px;"></div>
  </div>

</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
const sideMenu=document.getElementById("sideMenu");const main=document.getElementById("mainContent");
function toggleMenu(btn){btn.classList.toggle("open");sideMenu.style.left=sideMenu.style.left==="0px"? "-250px":"0";main.style.marginLeft=sideMenu.style.left==="0px"? "250px":"0";}
function showSection(sec){['monitoramento','detalhes'].forEach(s=>document.getElementById(s).style.display='none');document.getElementById(sec).style.display='block';}

// Dados fict√≠cios
const betoneirasData=[
  {id:'01',tipo:'Betoneira 400L',status:'Dispon√≠vel',coords:[-8.05,-34.9],custo:'R$ 1200',cliente:'Construtora Alpha'},
  {id:'02',tipo:'Betoneira 250L',status:'Em Uso',coords:[-8.1,-34.88],custo:'R$ 800',cliente:'Obra Beta'},
  {id:'03',tipo:'Betoneira 600L',status:'Em Manuten√ß√£o',coords:[-8.07,-34.92],custo:'R$ 450',cliente:'Engenharia Gama'}
];
const imgUrl="https://raw.githubusercontent.com/gustavoluiz111/guimaraes/main/Aluguel%20De%20Betoneira%20Empresa%20De%20Loca%C3%A7%C3%A3o%20De%20Equipamentos%20Criativo%20Laranja%20Pr_20250917_232950_0000.png";

// Montar cards
const betoneirasDiv=document.getElementById('betoneiras');
betoneirasData.forEach(b=>{
  const card=document.createElement('div');card.className='card';
  const statusClass=b.status==='Dispon√≠vel'?'disponivel':b.status==='Em Uso'?'uso':'manutencao';
  card.innerHTML=`<h3>${b.tipo}</h3><img class="betoneira" src="${imgUrl}"><div class="status ${statusClass}">${b.status}</div>`;
  card.onclick=()=>abrirDetalhes(b);
  betoneirasDiv.appendChild(card);
});

// Mapa principal
const map=L.map('map').setView([-8.05,-34.9],13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
betoneirasData.forEach(b=>{L.marker(b.coords).addTo(map).bindPopup(`<b>${b.tipo}</b><br>Status: ${b.status}`);});

// Abrir detalhes
function abrirDetalhes(b){
  showSection('detalhes');
  const conteudo=document.getElementById('detalhesConteudo');
  conteudo.innerHTML=`
    <h2>${b.tipo} (ID: ${b.id})</h2>
    <p><b>Status:</b> ${b.status}</p>
    <p><b>Cliente:</b> ${b.cliente}</p>
    <p><b>Custo acumulado:</b> ${b.custo}</p>
    <p><b>Boletim do rastreador:</b> √öltima atualiza√ß√£o h√° 15min</p>
    <button onclick="irParaMapa(${b.coords})">Ver no mapa</button>
  `;
  // mapa de detalhe
  const detalheMapa=L.map('detalheMapa').setView(b.coords,15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(detalheMapa);
  L.marker(b.coords).addTo(detalheMapa).bindPopup(b.tipo).openPopup();
}

// "Ir para mapa"
function irParaMapa(coords){showSection('monitoramento');map.setView(coords,16);}
</script>
</body>
</html>
